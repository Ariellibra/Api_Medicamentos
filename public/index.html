<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <title>API Medicamentos</title>
</head>

<body>
    <h1>API de Medicamentos</h1>
    <button id="btnSetup">Crear tabla + importar CSV</button>
    <p id="msg"></p>

    <a href="gestionar.html"><button>Ir a gestionar medicamentos</button></a>
    <a href="tablaMedicamentos.html"><button>Ir a tabla de medicamentos</button></a>


    <script>
        document.getElementById("btnSetup").onclick = async () => {
            document.getElementById("msg").textContent = "Procesandoâ€¦";
            try {
                const r = await fetch("/setup", { method: "POST" });
                const j = await r.json();
                document.getElementById("msg").textContent =
                    j.ok ? `Importados ${j.inserted} registros âœ…` : "Error ðŸ˜¢";
            } catch (e) {
                document.getElementById("msg").textContent = e.message;
            }
        };
    </script>
</body>

</html>